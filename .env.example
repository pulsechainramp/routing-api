# Application
PORT=3000
NODE_ENV=development
LOG_LEVEL=info
# ENABLE_SWAGGER=true

# Frontend origins (comma separated)
CORS_ALLOWLIST=http://localhost:5173,http://localhost:3000,http://localhost:5174,https://pulsechainramp.com

# Contact form SMTP (required for /api/contact)
CONTACT_SMTP_HOST=smtp.gmail.com
CONTACT_SMTP_PORT=587
CONTACT_SMTP_SECURE=false
CONTACT_SMTP_USER=your-smtp-user@example.com
CONTACT_SMTP_PASS=your-smtp-password
CONTACT_EMAIL_FROM=PulseChainRamp
CONTACT_EMAIL_TO=alerts@example.com
CONTACT_RATE_LIMIT_MAX=20
CONTACT_RATE_LIMIT_WINDOW=1 minute

# Database (required)
DATABASE_URL=postgresql://routing_app:change_me@localhost:5432/routing?schema=public

# Core services
PITEAS_API_BASE_URL=https://sdk.piteas.io
PULSECHAIN_RPC_URLS=https://rpc.pulsechain.com,https://pulsechain-rpc.publicnode.com,https://rpc-pulsechain.g4mm4.io,https://pulsechain.rpc.thirdweb.com,https://evex.cloud/pulserpc
ETHEREUM_RPC_URLS=https://ethereum-rpc.publicnode.com,https://rpc.ankr.com/eth,https://ethereum.public.blockpi.network/v1/rpc/public,https://eth.drpc.org
RPC_URL=https://rpc.pulsechain.com
RPC_STALL_TIMEOUT_MS=1200
RPC_RETRY_COUNT=2
RPC_RETRY_DELAY_MS=200
RPC_COOLDOWN_MS=30000
RPC_RATE_LIMIT_COOLDOWN_MS=60000
# Override defaults for PulseX addresses if needed
PULSEX_STABLE_ROUTER_ADDRESS=0xDA9aBA4eACF54E0273f56dfFee6B8F1e20B23Bba
PULSEX_STABLE_POOL_ADDRESS=0xE3acFA6C40d53C3faf2aa62D0a715C737071511c
# Uncomment to override Ethereum RPC behavior (inherits RPC_* defaults otherwise)
#ETH_RPC_URL=https://ethereum-rpc.publicnode.com
#ETH_RPC_STALL_TIMEOUT_MS=1200
#ETH_RPC_RETRY_COUNT=2
#ETH_RPC_RETRY_DELAY_MS=200
#ETH_RPC_COOLDOWN_MS=30000

# Quote signing (set to a dedicated hot key with minimal permissions)
QUOTE_SIGNING_PRIVATE_KEY=
QUOTE_SIGNER_ADDRESS=
QUOTE_CHAIN_ID=369
QUOTE_MAX_DEADLINE_SECONDS=1800 # increase if your quote provider returns longer deadlines

# Proxy configuration (optional)
USE_PROXY=false
PROXY_LIST=
PROXY_USERNAME=
PROXY_PASSWORD=

# Rate limiting (optional overrides)
RATE_LIMIT_REQUESTS=10
RATE_LIMIT_WINDOW_MS=60000
RL_POINTS=200
RL_DURATION=60
QUOTE_RL_POINTS=10
QUOTE_RL_DURATION=5
TRUST_PROXY=

# Onramp providers data
ONRAMPS_JSON_PATH=./src/data/onramps_providers.json

# Legacy integrations (optional)
CHANGENOW_API_KEY=

# Referral creation auth & limits
JWT_SECRET=development-jwt-secret-change-me
JWT_EXPIRES_IN=24h
# Comma-separated list of trusted Host headers for SIWE (required)
SIWE_DOMAIN=localhost # change to pulsechainramp.com in production
SIWE_URI=http://localhost:5173 # change to https://pulsechainramp.com in production
SIWE_STATEMENT=Sign in to create a referral code
SIWE_CHAIN_ID=369
REFERRAL_CREATION_RATE_LIMIT_MAX=3
REFERRAL_CREATION_RATE_LIMIT_WINDOW=1 minute
REFERRAL_READ_RATE_LIMIT_MAX=60
REFERRAL_READ_RATE_LIMIT_WINDOW=1 minute
REFERRAL_FEES_RATE_LIMIT_MAX=120
REFERRAL_FEES_RATE_LIMIT_WINDOW=1 minute
SIWE_CHALLENGE_RATE_LIMIT_MAX=20
SIWE_CHALLENGE_RATE_LIMIT_WINDOW=1 minute

# OmniBridge protections
OMNIBRIDGE_CREATE_RATE_LIMIT_MAX=5
OMNIBRIDGE_CREATE_RATE_LIMIT_WINDOW=1 minute
# OMNIBRIDGE_CREATE_RATE_LIMIT_BAN=
OMNIBRIDGE_CREATE_ENABLED=true
OMNI_MISS_TTL_MS=600000
RPC_ETH_MAX_CONCURRENCY=5
RPC_PLS_MAX_CONCURRENCY=5
OMNIBRIDGE_ETH_CONTRACTS=0x88ad09518695c6c3712ac10a214be5109a655671,0xe20e337db2a00b1c37139c873b92a0aad3f468bf
OMNIBRIDGE_PLS_CONTRACTS=0x4fd0aaa7506f3d9cb8274bdb946ec42a1b8751ef,0x0e18d0d556b652794ef12bf68b2dc857ef5f3996
OMNIBRIDGE_HISTORY_RATE_LIMIT_MAX=30
OMNIBRIDGE_HISTORY_RATE_LIMIT_WINDOW=1 minute
# OMNIBRIDGE_HISTORY_RATE_LIMIT_BAN=
OMNIBRIDGE_SYNC_RATE_LIMIT_MAX=2
OMNIBRIDGE_SYNC_RATE_LIMIT_WINDOW=10 minutes
# OMNIBRIDGE_SYNC_RATE_LIMIT_BAN=
REFERRAL_FEES_ADMIN_ADDRESSES=

# PulseX stress testing
PULSEX_QUOTE_URL=http://localhost:3000/quote/pulsex
PULSEX_STRESS_MODE=hammer
PULSEX_STRESS_CONCURRENCY=20
PULSEX_STRESS_DURATION_SEC=60
PULSEX_STRESS_CONNECTIONS=100
PULSEX_STRESS_MAX_REQUESTS_PER_CONN=0
PULSEX_THINK_MIN_MS=2000
PULSEX_THINK_MAX_MS=10000


# PulseX smart-router tuning
PULSEX_MULTICALL_ENABLED=true
PULSECHAIN_MULTICALL_ADDRESS=0x49f41373034E81e65e04e2F5745A8153782D72df

# --- Route search breadth ---
PULSEX_MAX_CONNECTOR_HOPS=2
PULSEX_EXTRA_CONNECTORS_ENABLED=true

PULSEX_QUOTE_MAX_ROUTES=40
PULSEX_QUOTE_CONCURRENCY=4

# --- Per-call timeouts ---
PULSEX_QUOTE_TIMEOUT_MS=2000
PULSEX_MULTICALL_TIMEOUT_MS=2000
PULSEX_MULTICALL_MAX_BATCH=40

# --- Overall budget ---
PULSEX_QUOTE_TOTAL_TIMEOUT_MS=10000

# --- Stable routing ---
PULSEX_STABLE_ROUTING_ENABLED=true
PULSEX_STABLE_ROUTING_USE_STABLE_CONNECTOR_FOR_PLS=true
PULSEX_STABLE_ROUTING_MAX_PIVOTS=3

# --- Split routing (large trades) ---
PULSEX_SPLIT_ROUTES_ENABLED=true
PULSEX_SPLIT_MIN_USD=10000
PULSEX_SPLIT_MAX_ROUTES=3
PULSEX_SPLIT_MIN_IMPROVEMENT_BPS=10
PULSEX_SPLIT_WEIGHTS=3000,4000,5000,6000,7000

# --- Fees ---
PULSEX_V1_FEE_BPS=29
PULSEX_V2_FEE_BPS=29

# --- Debug while tuning ---
PULSEX_DEBUG_LOGGING=true
PULSEX_DEBUG_ROUTING=false
